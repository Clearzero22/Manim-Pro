# 开发文档

## 项目概述

本项目是一个使用 Manim 库创建动画的 Python 项目。当前实现了一个二叉树构建过程的可视化动画，通过中序遍历和后序遍历数组来构建二叉树。

## 技术栈

- Python 3.13+
- Manim - 数学动画引擎
- uv - Python 包和项目管理工具

## 项目结构

```
.
├── main.py              # 主要的动画代码
├── pyproject.toml       # 项目配置和依赖声明
├── uv.lock             # uv 锁文件
├── .python-version     # Python 版本声明
├── .gitignore          # Git 忽略文件配置
├── README.md           # 项目说明文件
├── dev_doc/            # 开发文档目录
│   ├── 1. use_guide.md # 使用指南
│   └── 2. development_guide.md # 开发文档
└── media/              # 媒体文件目录
    ├── images/
    ├── texts/
    └── videos/
```

## 环境设置

### 先决条件

- Python 3.13 或更高版本
- uv 包管理工具

### 安装步骤

1. 克隆项目代码库
   ```bash
   git clone <repository-url>
   cd python-project
   ```

2. 使用 uv 安装依赖
   ```bash
   uv sync
   ```

3. 验证安装
   ```bash
   uv run python --version
   ```

## 开发指南

### 项目配置

项目使用 `pyproject.toml` 文件管理依赖和配置：

```toml
[project]
name = "python-project"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.13"
dependencies = [
    "manim>=0.19.0",
]
```

### 创建新动画

1. 在 `main.py` 中创建新的场景类：
   ```python
   class YourAnimation(Scene):
       def construct(self):
           # 你的动画代码
           pass
   ```

2. 使用以下命令运行动画：
   ```bash
   uv run manim -pql main.py YourAnimation
   ```

### Manim 命令说明

- `-p`: 预览生成的动画
- `-q`: 设置渲染质量（l=低, m=中, h=高, p=生产）
- `-l`: 低质量快速渲染

### 动画开发最佳实践

1. **模块化设计**: 将复杂动画分解为多个小步骤
2. **时间控制**: 合理使用 `self.wait()` 控制动画节奏
3. **颜色搭配**: 使用一致的颜色方案增强可视化效果
4. **文本清晰**: 确保文本大小适中，易于阅读

## 代码规范

### Python 代码规范

- 遵循 PEP 8 编码规范
- 使用类型提示增强代码可读性
- 编写清晰的文档字符串

### Manim 特定规范

- 使用有意义的对象命名
- 合理组织场景中的对象布局
- 添加适当的注释说明动画逻辑

## 构建和部署

### 生成动画视频

```bash
# 低质量快速渲染（开发用）
uv run manim -ql main.py BuildTreeAnimation

# 高质量渲染（生产用）
uv run manim -qh main.py BuildTreeAnimation
```

生成的视频文件将保存在 `media/videos/` 目录中。

### 清理构建文件

```bash
# 删除所有生成的媒体文件
rm -rf media/
```

## 故障排除

### 常见问题

1. **Manim 导入错误**
   - 确保已正确安装依赖：`uv sync`
   - 检查 Python 版本是否符合要求

2. **渲染性能问题**
   - 使用低质量设置进行开发测试：`-ql`
   - 避免在动画中使用过多复杂对象

3. **字体渲染问题**
   - 确保系统安装了必要的字体
   - 可以在代码中指定特定字体

### 支持资源

- [Manim 官方文档](https://docs.manim.community/)
- [Manim GitHub 仓库](https://github.com/ManimCommunity/manim)
- [uv 文档](https://docs.astral.sh/uv/)

## 贡献指南

1. Fork 项目仓库
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

## 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](../LICENSE) 文件了解详情。